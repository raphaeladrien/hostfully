import org.gradle.api.tasks.testing.logging.TestExceptionFormat
import org.gradle.api.tasks.testing.logging.TestLogEvent

tasks.withType(Test) {
	testLogging {
		// set options for log level LIFECYCLE
		events TestLogEvent.FAILED,
				TestLogEvent.PASSED,
				TestLogEvent.SKIPPED

		// set options for log level DEBUG and INFO
		debug {
			events TestLogEvent.STARTED,
					TestLogEvent.FAILED,
					TestLogEvent.PASSED,
					TestLogEvent.SKIPPED,
					TestLogEvent.STANDARD_ERROR,
					TestLogEvent.STANDARD_OUT
		}
		info.events = debug.events
		info.showExceptions = true

		exceptionFormat = TestExceptionFormat.FULL

		afterSuite { desc, result ->
			if (!desc.parent) {
				println('-----------')
				println("${result.resultType}")
				println("Total: ${result.testCount}")
				println("Passed: ${result.successfulTestCount}")
				println("Failed: ${result.failedTestCount}")
				println("Skiped: ${result.skippedTestCount}")
				println('-----------')
			}
		}
	}
}
